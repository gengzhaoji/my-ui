import{_ as s,c as n,o as a,a as l}from"./app.14664fbb.js";const i=JSON.parse('{"title":"watch \u76D1\u542C ref reactive \u54CD\u5E94\u5F0F\u6570\u636E\u3001\u6CE8\u610F\u70B9","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u76D1\u89C6 ref \u54CD\u5E94\u6570\u636E","slug":"\u76D1\u89C6-ref-\u54CD\u5E94\u6570\u636E"},{"level":2,"title":"\u76D1\u542C ref \u591A\u4E2A\u54CD\u5E94\u5F0F\u6570\u636E","slug":"\u76D1\u542C-ref-\u591A\u4E2A\u54CD\u5E94\u5F0F\u6570\u636E"},{"level":2,"title":"\u76D1\u542C reactive \u54CD\u5E94\u5F0F\u6570\u636E","slug":"\u76D1\u542C-reactive-\u54CD\u5E94\u5F0F\u6570\u636E"},{"level":2,"title":"\u76D1\u542C reactive \u67D0\u4E2A\u5C5E\u6027","slug":"\u76D1\u542C-reactive-\u67D0\u4E2A\u5C5E\u6027"},{"level":2,"title":"\u76D1\u542C reactive \u591A\u4E2A\u5C5E\u6027","slug":"\u76D1\u542C-reactive-\u591A\u4E2A\u5C5E\u6027"},{"level":2,"title":"\u76D1\u542C reactive \u5BF9\u8C61\u5C5E\u6027","slug":"\u76D1\u542C-reactive-\u5BF9\u8C61\u5C5E\u6027"},{"level":2,"title":"\u76D1\u542C ref \u5BF9\u8C61\u6570\u636E","slug":"\u76D1\u542C-ref-\u5BF9\u8C61\u6570\u636E"}],"relativePath":"knowledge/vue/watch.md","lastUpdated":1684992698000}'),p={name:"knowledge/vue/watch.md"},o=l(`<h1 id="watch-\u76D1\u542C-ref-reactive-\u54CD\u5E94\u5F0F\u6570\u636E\u3001\u6CE8\u610F\u70B9" tabindex="-1">watch \u76D1\u542C ref reactive \u54CD\u5E94\u5F0F\u6570\u636E\u3001\u6CE8\u610F\u70B9 <a class="header-anchor" href="#watch-\u76D1\u542C-ref-reactive-\u54CD\u5E94\u5F0F\u6570\u636E\u3001\u6CE8\u610F\u70B9" aria-hidden="true">#</a></h1><p><code>ref</code>\u5305\u88F9\u540E\u662F\u4E2A\u5BF9\u8C61\uFF0C\u662F<code>refImpl</code>\u7684\u5B9E\u4F8B\u5BF9\u8C61\uFF0C<code>reactive</code>\u5305\u88F9\u540E\u662F\u4E2A\u5BF9\u8C61\uFF0C\u662F<code>Proxy</code>\u7684\u5B9E\u4F8B\u5BF9\u8C61\uFF0C</p><h2 id="\u76D1\u89C6-ref-\u54CD\u5E94\u6570\u636E" tabindex="-1">\u76D1\u89C6 <code>ref</code> \u54CD\u5E94\u6570\u636E <a class="header-anchor" href="#\u76D1\u89C6-ref-\u54CD\u5E94\u6570\u636E" aria-hidden="true">#</a></h2><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">setup</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">import </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> ref</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> watch </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> from &#39;vue&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;">let sum = ref(0);</span></span>
<span class="line"><span style="color:#A6ACCD;">setTimeout(() =&gt; </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    sum</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">, 1000);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">watch(</span></span>
<span class="line"><span style="color:#A6ACCD;">    sum,</span></span>
<span class="line"><span style="color:#A6ACCD;">    (newvalue, oldvalue) =&gt; </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(newvalue</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> oldvalue);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> immediate: </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><blockquote><p>\u7ED3\u679C\uFF1A</p><p><code>0 undefined</code></p><p><code>2 0</code></p></blockquote><h2 id="\u76D1\u542C-ref-\u591A\u4E2A\u54CD\u5E94\u5F0F\u6570\u636E" tabindex="-1">\u76D1\u542C <code>ref</code> \u591A\u4E2A\u54CD\u5E94\u5F0F\u6570\u636E <a class="header-anchor" href="#\u76D1\u542C-ref-\u591A\u4E2A\u54CD\u5E94\u5F0F\u6570\u636E" aria-hidden="true">#</a></h2><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">setup</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">import </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> ref</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> watch </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> from &#39;vue&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;">let sum = ref(0),</span></span>
<span class="line"><span style="color:#A6ACCD;">    msg = ref(&#39;nihao&#39;);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">setTimeout(() =&gt; </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    sum</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    msg</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">value </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">MyUi</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">, 1000);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">watch(</span></span>
<span class="line"><span style="color:#A6ACCD;">    [msg, sum],</span></span>
<span class="line"><span style="color:#A6ACCD;">    (newvalue, oldvalue) =&gt; </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(newvalue</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> oldvalue);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> immediate: </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><blockquote><p>\u7ED3\u679C\uFF1A</p><p><code>[&#39;nihao&#39;, 0] []</code></p><p><code>[&#39;MyUi&#39;, 2] [&#39;nihao&#39;, 0]</code></p></blockquote><h2 id="\u76D1\u542C-reactive-\u54CD\u5E94\u5F0F\u6570\u636E" tabindex="-1">\u76D1\u542C <code>reactive</code> \u54CD\u5E94\u5F0F\u6570\u636E <a class="header-anchor" href="#\u76D1\u542C-reactive-\u54CD\u5E94\u5F0F\u6570\u636E" aria-hidden="true">#</a></h2><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">setup</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">import </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> reactive</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> watch </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> from &#39;vue&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;">let person = reactive(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    name: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">\u5F20\u4E09</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    age: </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    jap: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">a</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#F07178;">b</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">setTimeout(() =&gt; </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    person</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">\u674E\u56DB</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    person</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">jap</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">b </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">20</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">, 1000);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">watch(</span></span>
<span class="line"><span style="color:#A6ACCD;">    person,</span></span>
<span class="line"><span style="color:#A6ACCD;">    (newvalue, oldvalue) =&gt; </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(JSON</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">parse</span><span style="color:#A6ACCD;">(JSON</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">stringify</span><span style="color:#A6ACCD;">(newvalue))</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> oldvalue </span><span style="color:#89DDFF;">?</span><span style="color:#A6ACCD;"> JSON</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">parse</span><span style="color:#A6ACCD;">(JSON</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">stringify</span><span style="color:#A6ACCD;">(oldvalue)) </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> oldvalue);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> immediate: </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><blockquote><p><strong>\u7ED3\u679C\uFF1A</strong></p><p><code>{name: &#39;\u5F20\u4E09&#39;, age: 123, jap: {a: {b: 10}}} undefined</code></p><p><code>{name: &#39;\u674E\u56DB&#39;, age: 123, jap: {a: {b: 20}}} {name: &#39;\u674E\u56DB&#39;, age: 123, jap: {a: {b: 20}}}</code></p></blockquote><hr><blockquote><p><strong>\u6CE8\u610F\uFF1A</strong></p><ul><li>\u6B64\u5904\u65E0\u6CD5\u6B63\u786E\u7684\u83B7\u53D6 <code>oldValue</code></li><li>\u9ED8\u8BA4\u5F3A\u5236\u5F00\u542F\u6DF1\u5EA6\u76D1\u542C <code>{ deep: true }</code>\uFF0C<code>deep\u5C06\u914D\u7F6E\u65E0\u6548</code></li></ul></blockquote><h2 id="\u76D1\u542C-reactive-\u67D0\u4E2A\u5C5E\u6027" tabindex="-1">\u76D1\u542C <code>reactive</code> \u67D0\u4E2A\u5C5E\u6027 <a class="header-anchor" href="#\u76D1\u542C-reactive-\u67D0\u4E2A\u5C5E\u6027" aria-hidden="true">#</a></h2><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">setup</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">import </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> reactive</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> watch </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> from &#39;vue&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;">let person = reactive(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    name: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">\u5F20\u4E09</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    age: </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    jap: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">a</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#F07178;">b</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">setTimeout(() =&gt; </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    person</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">\u674E\u56DB</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">, 1000);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">watch(</span></span>
<span class="line"><span style="color:#A6ACCD;">    () =&gt; person.name,</span></span>
<span class="line"><span style="color:#A6ACCD;">    (newvalue, oldvalue) =&gt; </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(newvalue</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> oldvalue);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> immediate: </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><blockquote><p><strong>\u7ED3\u679C\uFF1A</strong></p><p><code>\u5F20\u4E09 undefined</code></p><p><code>\u674E\u56DB \u5F20\u4E09</code></p></blockquote><h2 id="\u76D1\u542C-reactive-\u591A\u4E2A\u5C5E\u6027" tabindex="-1">\u76D1\u542C <code>reactive</code> \u591A\u4E2A\u5C5E\u6027 <a class="header-anchor" href="#\u76D1\u542C-reactive-\u591A\u4E2A\u5C5E\u6027" aria-hidden="true">#</a></h2><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">setup</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">import </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> reactive</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> watch </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> from &#39;vue&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;">let person = reactive(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    name: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">\u5F20\u4E09</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    age: </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    jap: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">a</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#F07178;">b</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">setTimeout(() =&gt; </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    person</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">\u674E\u56DB</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    person</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">jap</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">b </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">20</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">, 10000);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">watch(</span></span>
<span class="line"><span style="color:#A6ACCD;">    // \u76F8\u5F53\u4E8E\u5B9A\u4E49\u4E86\u4E00\u4E2A ref \u5BF9\u8C61\u5F0F\u54CD\u5E94\u6570\u636E\u7C7B\u578B</span></span>
<span class="line"><span style="color:#A6ACCD;">    [() =&gt; person.name, () =&gt; person.jap.a.b],</span></span>
<span class="line"><span style="color:#A6ACCD;">    (newvalue, oldvalue) =&gt; </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(newvalue</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> oldvalue);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> immediate: </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><blockquote><p><strong>\u7ED3\u679C\uFF1A</strong></p><p><code>[&#39;\u5F20\u4E09&#39;, 10] []</code></p><p><code>[&#39;\u674E\u56DB&#39;, 20] [&#39;\u5F20\u4E09&#39;, 10]</code></p></blockquote><h2 id="\u76D1\u542C-reactive-\u5BF9\u8C61\u5C5E\u6027" tabindex="-1">\u76D1\u542C <code>reactive</code> \u5BF9\u8C61\u5C5E\u6027 <a class="header-anchor" href="#\u76D1\u542C-reactive-\u5BF9\u8C61\u5C5E\u6027" aria-hidden="true">#</a></h2><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">setup</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">import </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> reactive</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> watch </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> from &#39;vue&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;">let person = reactive(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    name: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">\u5F20\u4E09</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    age: </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    jap: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">a</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#F07178;">b</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">setTimeout(() =&gt; </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    person</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">jap</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">b </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">20</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">, 1000);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">watch(</span></span>
<span class="line"><span style="color:#A6ACCD;">    // \u76F8\u5F53\u4E8E\u5B9A\u4E49\u4E86\u4E00\u4E2A ref \u5BF9\u8C61\u5F0F\u54CD\u5E94\u6570\u636E\u7C7B\u578B</span></span>
<span class="line"><span style="color:#A6ACCD;">    () =&gt; person.jap,</span></span>
<span class="line"><span style="color:#A6ACCD;">    (newvalue, oldvalue) =&gt; </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(JSON</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">parse</span><span style="color:#A6ACCD;">(JSON</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">stringify</span><span style="color:#A6ACCD;">(newvalue))</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> oldvalue </span><span style="color:#89DDFF;">?</span><span style="color:#A6ACCD;"> JSON</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">parse</span><span style="color:#A6ACCD;">(JSON</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">stringify</span><span style="color:#A6ACCD;">(oldvalue)) </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> oldvalue);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> immediate: </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> deep: </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><blockquote><p><strong>\u7ED3\u679C\uFF1A</strong></p><p><code>a: { b: 10 } undefined</code></p><p><code>a: { b: 20 } a: { b: 20 }</code></p></blockquote><hr><blockquote><p><strong>\u6CE8\u610F\uFF1A</strong></p><ul><li>\u6B64\u5904\u65E0\u6CD5\u6B63\u786E\u7684\u83B7\u53D6 <code>oldValue</code></li><li>\u5FC5\u987B\u5F3A\u5236\u5F00\u542F\u6DF1\u5EA6\u76D1\u542C\uFF0C\u914D\u7F6E\u65E0\u6548</li></ul></blockquote><h2 id="\u76D1\u542C-ref-\u5BF9\u8C61\u6570\u636E" tabindex="-1">\u76D1\u542C <code>ref</code> \u5BF9\u8C61\u6570\u636E <a class="header-anchor" href="#\u76D1\u542C-ref-\u5BF9\u8C61\u6570\u636E" aria-hidden="true">#</a></h2><div class="language-js"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;"> </span><span style="color:#C792EA;">setup</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#A6ACCD;">import </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> ref</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> watch</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> unref </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> from &#39;vue&#39;;</span></span>
<span class="line"><span style="color:#A6ACCD;">let person = ref(</span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    name: </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">\u5F20\u4E09</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    age: </span><span style="color:#F78C6C;">123</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    jap: </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#F07178;">a</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#F07178;">b</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">10</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">},</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">setTimeout(() =&gt; </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">unref</span><span style="color:#A6ACCD;">(person)</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">jap</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">b </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">20</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">, 1000);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">// \u7B2C\u4E00\u79CD\uFF1A\u914D\u7F6Edeep\u4E3Atrue\u89E3\u51B3\u95EE\u9898</span></span>
<span class="line"><span style="color:#A6ACCD;">watch(</span></span>
<span class="line"><span style="color:#A6ACCD;">    person,</span></span>
<span class="line"><span style="color:#A6ACCD;">    (newvalue, oldvalue) =&gt; </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(JSON</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">parse</span><span style="color:#A6ACCD;">(JSON</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">stringify</span><span style="color:#A6ACCD;">(newvalue))</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> oldvalue </span><span style="color:#89DDFF;">?</span><span style="color:#A6ACCD;"> JSON</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">parse</span><span style="color:#A6ACCD;">(JSON</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">stringify</span><span style="color:#A6ACCD;">(oldvalue)) </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> oldvalue);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> immediate: </span><span style="color:#FF9CAC;">true</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> deep: </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">// \u7B2C\u4E8C\u79CD: \u901A\u8FC7ref\u4F20\u5BF9\u8C61\uFF0C\u5185\u90E8\u4F1A\u8C03\u7528reactive\u65B9\u6CD5\uFF0C\u5C06proxy\u4EE3\u7406\u5BF9\u8C61\u8D4B\u503C\u7ED9 RefImpl.value\u6240\u4EE5\u9700\u8981\u76D1\u542Cvalue\u7684\u503C</span></span>
<span class="line"><span style="color:#A6ACCD;">watch(</span></span>
<span class="line"><span style="color:#A6ACCD;">    person.value,</span></span>
<span class="line"><span style="color:#A6ACCD;">    (newvalue, oldvalue) =&gt; </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">        console</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">log</span><span style="color:#A6ACCD;">(JSON</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">parse</span><span style="color:#A6ACCD;">(JSON</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">stringify</span><span style="color:#A6ACCD;">(newvalue))</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> oldvalue </span><span style="color:#89DDFF;">?</span><span style="color:#A6ACCD;"> JSON</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">parse</span><span style="color:#A6ACCD;">(JSON</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">stringify</span><span style="color:#A6ACCD;">(oldvalue)) </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> oldvalue);</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> immediate: </span><span style="color:#FF9CAC;">true</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">);</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;/</span><span style="color:#F07178;">script</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"></span></code></pre></div><blockquote><p><strong>\u7ED3\u679C\uFF1A</strong></p><p><code>{name: &#39;\u5F20\u4E09&#39;, age: 123, jap: {a: {b: 10}}} undefined</code></p><p><code>{name: &#39;\u674E\u56DB&#39;, age: 123, jap: {a: {b: 20}}} {name: &#39;\u674E\u56DB&#39;, age: 123, jap: {a: {b: 20}}}</code></p></blockquote><hr><blockquote><p><strong>\u6CE8\u610F\uFF1A</strong></p><ul><li>\u6B64\u5904\u65E0\u6CD5\u6B63\u786E\u7684\u83B7\u53D6 <code>oldValue</code></li></ul></blockquote>`,29),e=[o];function c(t,r,D,y,A,C){return a(),n("div",null,e)}var d=s(p,[["render",c]]);export{i as __pageData,d as default};
