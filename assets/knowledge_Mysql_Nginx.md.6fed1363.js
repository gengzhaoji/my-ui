import{_ as s,c as n,o as a,a as l}from"./app.7dede5df.js";const d=JSON.parse('{"title":"\u6DF1\u5165\u7406\u89E3 Nginx \u7684 root \u548C alias \u6307\u4EE4","description":"","frontmatter":{},"headers":[{"level":2,"title":"\u4E00\u3001Nginx \u7684 root \u6307\u4EE4","slug":"\u4E00\u3001nginx-\u7684-root-\u6307\u4EE4"},{"level":2,"title":"\u4E8C\u3001Nginx \u7684 alias \u6307\u4EE4","slug":"\u4E8C\u3001nginx-\u7684-alias-\u6307\u4EE4"},{"level":2,"title":"\u4E09\u3001root \u4E0E alias \u7684\u533A\u522B","slug":"\u4E09\u3001root-\u4E0E-alias-\u7684\u533A\u522B"},{"level":2,"title":"\u56DB\u3001\u603B\u7ED3","slug":"\u56DB\u3001\u603B\u7ED3"},{"level":2,"title":"\u57FA\u7840\u914D\u7F6E","slug":"\u57FA\u7840\u914D\u7F6E"},{"level":2,"title":"\u9690\u85CF Nginx \u7248\u672C\u4FE1\u606F","slug":"\u9690\u85CF-nginx-\u7248\u672C\u4FE1\u606F"},{"level":2,"title":"\u7981\u6B62 ip \u76F4\u63A5\u8BBF\u95EE 80 \u7AEF\u53E3","slug":"\u7981\u6B62-ip-\u76F4\u63A5\u8BBF\u95EE-80-\u7AEF\u53E3"},{"level":2,"title":"\u542F\u52A8 web \u670D\u52A1 (vue \u9879\u76EE\u4E3A\u4F8B)","slug":"\u542F\u52A8-web-\u670D\u52A1-vue-\u9879\u76EE\u4E3A\u4F8B"},{"level":2,"title":"PC \u7AEF\u548C\u79FB\u52A8\u7AEF\u4F7F\u7528\u4E0D\u540C\u7684\u9879\u76EE\u6587\u4EF6\u6620\u5C04","slug":"pc-\u7AEF\u548C\u79FB\u52A8\u7AEF\u4F7F\u7528\u4E0D\u540C\u7684\u9879\u76EE\u6587\u4EF6\u6620\u5C04"},{"level":2,"title":"\u4E00\u4E2A web \u670D\u52A1\uFF0C\u914D\u7F6E\u591A\u4E2A\u9879\u76EE (location \u5339\u914D\u8DEF\u7531\u533A\u522B)","slug":"\u4E00\u4E2A-web-\u670D\u52A1\uFF0C\u914D\u7F6E\u591A\u4E2A\u9879\u76EE-location-\u5339\u914D\u8DEF\u7531\u533A\u522B"},{"level":2,"title":"\u914D\u7F6E\u8D1F\u8F7D\u5747\u8861","slug":"\u914D\u7F6E\u8D1F\u8F7D\u5747\u8861"},{"level":2,"title":"SSL \u914D\u7F6E HTTPS","slug":"ssl-\u914D\u7F6E-https"},{"level":2,"title":"/prod-api/ \u4E0E /prod-api \u7684\u533A\u522B\u8BE6\u89E3","slug":"prod-api-\u4E0E-prod-api-\u7684\u533A\u522B\u8BE6\u89E3"},{"level":3,"title":"\u914D\u7F6E\u5BF9\u6BD4","slug":"\u914D\u7F6E\u5BF9\u6BD4"},{"level":3,"title":"\u6838\u5FC3\u533A\u522B\u5206\u6790","slug":"\u6838\u5FC3\u533A\u522B\u5206\u6790"},{"level":3,"title":"\u5BF9\u6BD4\u8868\u683C","slug":"\u5BF9\u6BD4\u8868\u683C"},{"level":3,"title":"\u9002\u7528\u573A\u666F","slug":"\u9002\u7528\u573A\u666F"},{"level":3,"title":"\u5E38\u89C1\u95EE\u9898","slug":"\u5E38\u89C1\u95EE\u9898"},{"level":3,"title":"\u603B\u7ED3","slug":"\u603B\u7ED3"}],"relativePath":"knowledge/Mysql/Nginx.md","lastUpdated":1745744589000}'),p={name:"knowledge/Mysql/Nginx.md"},o=l(`<h1 id="\u6DF1\u5165\u7406\u89E3-nginx-\u7684-root-\u548C-alias-\u6307\u4EE4" tabindex="-1">\u6DF1\u5165\u7406\u89E3 Nginx \u7684 root \u548C alias \u6307\u4EE4 <a class="header-anchor" href="#\u6DF1\u5165\u7406\u89E3-nginx-\u7684-root-\u548C-alias-\u6307\u4EE4" aria-hidden="true">#</a></h1><p>Nginx \u662F\u4E00\u6B3E\u9AD8\u6027\u80FD\u7684 HTTP \u548C\u53CD\u5411\u4EE3\u7406\u670D\u52A1\u5668\uFF0C\u4E5F\u662F IMAP/POP3/SMTP \u4EE3\u7406\u670D\u52A1\u5668\u3002\u5728 Web \u670D\u52A1\u5668\u914D\u7F6E\u4E2D\uFF0CNginx \u7684<code>root</code>\u548C<code>alias</code>\u6307\u4EE4\u626E\u6F14\u7740\u81F3\u5173\u91CD\u8981\u7684\u89D2\u8272\uFF0C\u5B83\u4EEC\u7528\u4E8E\u6307\u5B9A Nginx \u5904\u7406\u8BF7\u6C42\u65F6\u67E5\u627E\u6587\u4EF6\u7684\u6839\u76EE\u5F55\u6216\u522B\u540D\u76EE\u5F55\u3002</p><h2 id="\u4E00\u3001nginx-\u7684-root-\u6307\u4EE4" tabindex="-1">\u4E00\u3001Nginx \u7684 root \u6307\u4EE4 <a class="header-anchor" href="#\u4E00\u3001nginx-\u7684-root-\u6307\u4EE4" aria-hidden="true">#</a></h2><ol><li>\u57FA\u672C\u6982\u5FF5</li></ol><p><code>root</code>\u6307\u4EE4\u7528\u4E8E\u6307\u5B9A\u8BF7\u6C42\u7684\u6839\u76EE\u5F55\u3002\u5F53 Nginx \u63A5\u6536\u5230\u4E00\u4E2A\u8BF7\u6C42\u65F6\uFF0C\u5B83\u4F1A\u5C06\u8BF7\u6C42\u7684 URI \u9644\u52A0\u5230<code>root</code>\u6307\u4EE4\u6307\u5B9A\u7684\u8DEF\u5F84\u4E0A\uFF0C\u4EE5\u5F62\u6210\u5B8C\u6574\u7684\u6587\u4EF6\u8DEF\u5F84\uFF0C\u5E76\u5C1D\u8BD5\u5728\u8BE5\u8DEF\u5F84\u4E0B\u67E5\u627E\u6587\u4EF6\u3002</p><ol start="2"><li>\u8BED\u6CD5\u4E0E\u914D\u7F6E\u6BB5</li></ol><ul><li>\u8BED\u6CD5\uFF1A<code>root path;</code></li><li>\u9ED8\u8BA4\u503C\uFF1A<code>root html;</code>\uFF08\u901A\u5E38\u6307\u5411 Nginx \u5B89\u88C5\u76EE\u5F55\u4E0B\u7684 html \u6587\u4EF6\u5939\uFF09</li><li>\u914D\u7F6E\u6BB5\uFF1A<code>http</code>\u3001<code>server</code>\u3001<code>location</code>\u3001<code>if</code></li></ul><ol start="3"><li>\u4F7F\u7528\u793A\u4F8B</li></ol><p>\u5047\u8BBE Nginx \u7684\u914D\u7F6E\u5982\u4E0B\uFF1A</p><div class="language-nginx"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">server</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> listen </span><span style="color:#A6ACCD;">80</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> server_name </span><span style="color:#A6ACCD;">example.com</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> root </span><span style="color:#A6ACCD;">/var/www/example</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">/ </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;"> index </span><span style="color:#A6ACCD;">index.html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">/images </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;"> root </span><span style="color:#A6ACCD;">/data</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span></code></pre></div><ul><li>\u5F53\u8BBF\u95EE<code>http://example.com/index.html</code>\u65F6\uFF0CNginx \u4F1A\u5C1D\u8BD5\u5728<code>/var/www/example/index.html</code>\u67E5\u627E\u6587\u4EF6\u3002</li><li>\u5F53\u8BBF\u95EE<code>http://example.com/images/logo.png</code>\u65F6\uFF0C\u7531\u4E8E<code>/images</code>\u4F4D\u7F6E\u5757\u4E2D\u5355\u72EC\u6307\u5B9A\u4E86<code>root /data;</code>\uFF0CNginx \u4F1A\u5C1D\u8BD5\u5728<code>/data/images/logo.png</code>\u67E5\u627E\u6587\u4EF6\uFF0C\u800C\u4E0D\u662F<code>/var/www/example/images/logo.png</code>\u3002</li></ul><ol start="4"><li>\u6CE8\u610F\u4E8B\u9879</li></ol><ul><li><code>root</code>\u6307\u4EE4\u7684\u8DEF\u5F84\u672B\u5C3E\u662F\u5426\u52A0\u659C\u6760<code>/</code>\uFF0C\u5BF9\u6700\u7EC8\u7684\u6587\u4EF6\u8DEF\u5F84\u6CA1\u6709\u5F71\u54CD\u3002\u4F46\u5728\u914D\u7F6E\u65F6\uFF0C\u4E3A\u4E86\u6E05\u6670\u548C\u4E00\u81F4\u6027\uFF0C\u5EFA\u8BAE\u4FDD\u6301\u8DEF\u5F84\u98CE\u683C\u7684\u4E00\u81F4\u6027\u3002</li><li>\u5F53\u5728<code>location</code>\u5757\u4E2D\u6307\u5B9A<code>root</code>\u65F6\uFF0C\u8BE5<code>root</code>\u4F1A\u8986\u76D6\u5916\u5C42<code>server</code>\u6216<code>http</code>\u5757\u4E2D\u7684<code>root</code>\u8BBE\u7F6E\uFF08\u5982\u679C\u6709\u7684\u8BDD\uFF09\u3002</li></ul><h2 id="\u4E8C\u3001nginx-\u7684-alias-\u6307\u4EE4" tabindex="-1">\u4E8C\u3001Nginx \u7684 alias \u6307\u4EE4 <a class="header-anchor" href="#\u4E8C\u3001nginx-\u7684-alias-\u6307\u4EE4" aria-hidden="true">#</a></h2><ol><li>\u57FA\u672C\u6982\u5FF5</li></ol><p>\u4E0E<code>root</code>\u4E0D\u540C\uFF0C<code>alias</code>\u6307\u4EE4\u7528\u4E8E\u6307\u5B9A\u4E00\u4E2A\u76EE\u5F55\u522B\u540D\uFF0C\u5B83\u4F1A\u66FF\u6362\u6389 location \u5339\u914D\u5230\u7684 URI \u90E8\u5206\u3002\u6362\u53E5\u8BDD\u8BF4\uFF0C\u5F53 Nginx \u5904\u7406\u8BF7\u6C42\u65F6\uFF0C\u5B83\u4F1A\u5C06 location \u5339\u914D\u5230\u7684 URI \u66FF\u6362\u4E3A<code>alias</code>\u6307\u5B9A\u7684\u8DEF\u5F84\uFF0C\u7136\u540E\u5728\u8FD9\u4E2A\u8DEF\u5F84\u4E0B\u67E5\u627E\u6587\u4EF6\u3002</p><ol start="2"><li>\u8BED\u6CD5\u4E0E\u914D\u7F6E\u6BB5</li></ol><ul><li>\u8BED\u6CD5\uFF1A<code>alias path;</code></li><li>\u914D\u7F6E\u6BB5\uFF1A\u4EC5<code>location</code></li></ul><ol start="3"><li>\u4F7F\u7528\u793A\u4F8B</li></ol><p>\u5047\u8BBE Nginx \u7684\u914D\u7F6E\u5982\u4E0B\uFF1A</p><div class="language-nginx"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">server</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> listen </span><span style="color:#A6ACCD;">80</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> server_name </span><span style="color:#A6ACCD;">example.com</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">/static </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;"> alias </span><span style="color:#A6ACCD;">/var/www/static/</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span></code></pre></div><p>\u5F53\u8BBF\u95EE<code>http://example.com/static/css/style.css</code>\u65F6\uFF0CNginx \u4F1A\u5C06<code>/static</code>\u66FF\u6362\u4E3A<code>/var/www/static/</code>\uFF0C\u7136\u540E\u5C1D\u8BD5\u5728<code>/var/www/static/css/style.css</code>\u67E5\u627E\u6587\u4EF6\u3002</p><ol start="4"><li>\u6CE8\u610F\u4E8B\u9879</li></ol><ul><li><code>alias</code>\u6307\u4EE4\u7684\u8DEF\u5F84\u672B\u5C3E\u5FC5\u987B\u52A0\u659C\u6760<code>/</code>\uFF0C\u4EE5\u8868\u793A\u8FD9\u662F\u4E00\u4E2A\u76EE\u5F55\u3002\u5982\u679C\u4E0D\u52A0\u659C\u6760\uFF0CNginx \u53EF\u80FD\u4F1A\u5C06\u8BF7\u6C42\u5F53\u4F5C\u6587\u4EF6\u6765\u5904\u7406\uFF0C\u5BFC\u81F4\u627E\u4E0D\u5230\u6587\u4EF6\u3002</li><li><code>alias</code>\u4E0D\u80FD\u7528\u4E8E<code>http</code>\u6216<code>server</code>\u5757\u4E2D\uFF0C\u53EA\u80FD\u5728<code>location</code>\u5757\u4E2D\u4F7F\u7528\u3002</li><li>\u5F53\u4F7F\u7528<code>alias</code>\u65F6\uFF0Clocation \u5339\u914D\u5230\u7684 URI \u90E8\u5206\u4F1A\u88AB\u5B8C\u5168\u66FF\u6362\uFF0C\u56E0\u6B64\u914D\u7F6E\u65F6\u9700\u8981\u7279\u522B\u6CE8\u610F\u8DEF\u5F84\u7684\u5BF9\u5E94\u5173\u7CFB\u3002</li></ul><h2 id="\u4E09\u3001root-\u4E0E-alias-\u7684\u533A\u522B" tabindex="-1">\u4E09\u3001root \u4E0E alias \u7684\u533A\u522B <a class="header-anchor" href="#\u4E09\u3001root-\u4E0E-alias-\u7684\u533A\u522B" aria-hidden="true">#</a></h2><table><thead><tr><th>\u6307\u4EE4</th><th>\u4F5C\u7528</th><th>\u914D\u7F6E\u6BB5</th><th>\u8DEF\u5F84\u62FC\u63A5\u65B9\u5F0F</th><th>\u8DEF\u5F84\u672B\u5C3E\u659C\u6760\u8981\u6C42</th></tr></thead><tbody><tr><td>root</td><td>\u6307\u5B9A\u8BF7\u6C42\u7684\u6839\u76EE\u5F55</td><td>http\u3001server\u3001location\u3001if</td><td>root \u8DEF\u5F84 + location \u5339\u914D\u8DEF\u5F84</td><td>\u53EF\u6709\u53EF\u65E0</td></tr><tr><td>alias</td><td>\u6307\u5B9A\u76EE\u5F55\u522B\u540D\uFF0C\u66FF\u6362 location \u5339\u914D\u8DEF\u5F84</td><td>\u4EC5 location</td><td>alias \u8DEF\u5F84\u66FF\u6362 location \u5339\u914D\u8DEF\u5F84</td><td>\u5FC5\u987B\u52A0</td></tr></tbody></table><h2 id="\u56DB\u3001\u603B\u7ED3" tabindex="-1">\u56DB\u3001\u603B\u7ED3 <a class="header-anchor" href="#\u56DB\u3001\u603B\u7ED3" aria-hidden="true">#</a></h2><p><code>root</code>\u548C<code>alias</code>\u662F Nginx \u914D\u7F6E\u4E2D\u7528\u4E8E\u6307\u5B9A\u6587\u4EF6\u8DEF\u5F84\u7684\u4E24\u4E2A\u91CD\u8981\u6307\u4EE4\u3002\u5B83\u4EEC\u7684\u4E3B\u8981\u533A\u522B\u5728\u4E8E\u8DEF\u5F84\u7684\u62FC\u63A5\u65B9\u5F0F\u548C\u914D\u7F6E\u6BB5\u7684\u4E0D\u540C\u3002\u7406\u89E3\u5E76\u6B63\u786E\u4F7F\u7528\u8FD9\u4E24\u4E2A\u6307\u4EE4\uFF0C\u5BF9\u4E8E\u9AD8\u6548\u914D\u7F6E Nginx \u670D\u52A1\u5668\u81F3\u5173\u91CD\u8981\u3002\u5728\u914D\u7F6E\u65F6\uFF0C\u9700\u8981\u6CE8\u610F\u8DEF\u5F84\u672B\u5C3E\u659C\u6760\u7684\u8981\u6C42\uFF0C\u4EE5\u53CA\u8DEF\u5F84\u7684\u5BF9\u5E94\u5173\u7CFB\uFF0C\u4EE5\u786E\u4FDD Nginx \u80FD\u591F\u6B63\u786E\u5730\u627E\u5230\u5E76\u5904\u7406\u8BF7\u6C42\u7684\u6587\u4EF6\u3002</p><h1 id="nginx-\u5E38\u7528\u7684\u57FA\u7840\u914D\u7F6E\uFF08web-\u524D\u7AEF\u76F8\u5173\u65B9\u9762\uFF09" tabindex="-1">Nginx \u5E38\u7528\u7684\u57FA\u7840\u914D\u7F6E\uFF08web \u524D\u7AEF\u76F8\u5173\u65B9\u9762\uFF09 <a class="header-anchor" href="#nginx-\u5E38\u7528\u7684\u57FA\u7840\u914D\u7F6E\uFF08web-\u524D\u7AEF\u76F8\u5173\u65B9\u9762\uFF09" aria-hidden="true">#</a></h1><h2 id="\u57FA\u7840\u914D\u7F6E" tabindex="-1">\u57FA\u7840\u914D\u7F6E <a class="header-anchor" href="#\u57FA\u7840\u914D\u7F6E" aria-hidden="true">#</a></h2><div class="language-nginx"><span class="copy"></span><pre><code><span class="line"><span style="color:#89DDFF;">user </span><span style="color:#A6ACCD;">                           root</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">worker_processes </span><span style="color:#A6ACCD;">               </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">events</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> worker_connections </span><span style="color:#A6ACCD;">           </span><span style="color:#F78C6C;">10240</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">http</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> log_format </span><span style="color:#A6ACCD;">                   </span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">remote_addr</span><span style="color:#C3E88D;"> - </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">remote_user</span><span style="color:#C3E88D;"> [</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">time_local</span><span style="color:#C3E88D;">] &#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">&#39;&quot;</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">request</span><span style="color:#C3E88D;">&quot; </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">status</span><span style="color:#C3E88D;"> </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">body_bytes_sent</span><span style="color:#C3E88D;"> &#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">&#39;&quot;</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">http_referer</span><span style="color:#C3E88D;">&quot; &quot;</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">http_user_agent</span><span style="color:#C3E88D;">&quot;&#39;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> include </span><span style="color:#A6ACCD;">                      mime.types</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> default_type </span><span style="color:#A6ACCD;">                 application/octet-stream</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> sendfile </span><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;"> on;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">#autoindex                    on;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;">#autoindex_exact_size         off;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> autoindex_localtime </span><span style="color:#A6ACCD;">         </span><span style="color:#89DDFF;"> on;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> keepalive_timeout </span><span style="color:#A6ACCD;">            </span><span style="color:#F78C6C;">65</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> gzip </span><span style="color:#A6ACCD;">                        </span><span style="color:#89DDFF;"> on;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> gzip_disable </span><span style="color:#A6ACCD;">                 </span><span style="color:#C3E88D;">&quot;msie6&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> gzip_min_length </span><span style="color:#A6ACCD;">              </span><span style="color:#F78C6C;">100</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> gzip_buffers </span><span style="color:#A6ACCD;">                 </span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">16k</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> gzip_comp_level </span><span style="color:#A6ACCD;">              </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> gzip_types </span><span style="color:#A6ACCD;">                 text/plain application/x-javascript text/css application/xml text/javascript application/x-httpd-php image/jpeg image/gif image/png</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> gzip_types </span><span style="color:#A6ACCD;">                   </span><span style="color:#C3E88D;">&quot;*&quot;</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> gzip_vary </span><span style="color:#A6ACCD;">                   </span><span style="color:#89DDFF;"> off;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> server_tokens </span><span style="color:#A6ACCD;">               </span><span style="color:#89DDFF;"> off;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> client_max_body_size </span><span style="color:#A6ACCD;">         </span><span style="color:#F78C6C;">200m</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">server</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> listen </span><span style="color:#A6ACCD;">                     </span><span style="color:#F78C6C;">80</span><span style="color:#89DDFF;"> default_server;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> server_name </span><span style="color:#A6ACCD;">                _</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;">                      </span><span style="color:#F78C6C;">403</span><span style="color:#A6ACCD;"> /www/403/index.html;</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> include </span><span style="color:#A6ACCD;">                      ../serve/*.conf</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="\u9690\u85CF-nginx-\u7248\u672C\u4FE1\u606F" tabindex="-1">\u9690\u85CF Nginx \u7248\u672C\u4FE1\u606F <a class="header-anchor" href="#\u9690\u85CF-nginx-\u7248\u672C\u4FE1\u606F" aria-hidden="true">#</a></h2><div class="language-nginx"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">http</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> server_tokens </span><span style="color:#A6ACCD;">       </span><span style="color:#89DDFF;"> off;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="\u7981\u6B62-ip-\u76F4\u63A5\u8BBF\u95EE-80-\u7AEF\u53E3" tabindex="-1">\u7981\u6B62 ip \u76F4\u63A5\u8BBF\u95EE 80 \u7AEF\u53E3 <a class="header-anchor" href="#\u7981\u6B62-ip-\u76F4\u63A5\u8BBF\u95EE-80-\u7AEF\u53E3" aria-hidden="true">#</a></h2><div class="language-nginx"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">server</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> listen </span><span style="color:#A6ACCD;">               </span><span style="color:#F78C6C;">80</span><span style="color:#89DDFF;"> default;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> server_name </span><span style="color:#A6ACCD;">          _</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;">                </span><span style="color:#F78C6C;">500</span><span style="color:#A6ACCD;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="\u542F\u52A8-web-\u670D\u52A1-vue-\u9879\u76EE\u4E3A\u4F8B" tabindex="-1">\u542F\u52A8 web \u670D\u52A1 (vue \u9879\u76EE\u4E3A\u4F8B) <a class="header-anchor" href="#\u542F\u52A8-web-\u670D\u52A1-vue-\u9879\u76EE\u4E3A\u4F8B" aria-hidden="true">#</a></h2><div class="language-nginx"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">server</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># \u9879\u76EE\u542F\u52A8\u7AEF\u53E3</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> listen </span><span style="color:#A6ACCD;">           </span><span style="color:#F78C6C;">80</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># \u57DF\u540D\uFF08localhost\uFF09</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> server_name </span><span style="color:#A6ACCD;">      _</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># \u7981\u6B62 iframe \u5D4C\u5957</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> add_header </span><span style="color:#A6ACCD;">       X-Frame-Options SAMEORIGIN</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># \u8BBF\u95EE\u5730\u5740 \u6839\u8DEF\u5F84\u914D\u7F6E</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">/ </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># \u9879\u76EE\u76EE\u5F55</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> root </span><span style="color:#A6ACCD;">	    html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># \u9ED8\u8BA4\u8BFB\u53D6\u6587\u4EF6</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> index </span><span style="color:#A6ACCD;">          index.html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># \u914D\u7F6E history \u6A21\u5F0F\u7684\u5237\u65B0\u7A7A\u767D</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> try_files </span><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">uri </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">uri/ /index.html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># \u540E\u7F00\u5339\u914D\uFF0C\u89E3\u51B3\u9759\u6001\u8D44\u6E90\u627E\u4E0D\u5230\u95EE\u9898</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">~*</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">\\.(gif|jpg|jpeg|png|css|js|ico)$ </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> root </span><span style="color:#A6ACCD;">          html/static/</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># \u56FE\u7247\u9632\u76D7\u94FE</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">~/static/.*\\.(jpg|jpeg|png|gif|webp)$ </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> root </span><span style="color:#A6ACCD;">             html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> valid_referers </span><span style="color:#A6ACCD;">   *.deeruby.com</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">invalid_referer) </span><span style="color:#F07178;">{</span></span>
<span class="line"><span style="color:#F07178;">      </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;">          </span><span style="color:#F78C6C;">403</span><span style="color:#F07178;">;</span></span>
<span class="line"><span style="color:#F07178;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># \u8BBF\u95EE\u9650\u5236</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">/static </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> root </span><span style="color:#A6ACCD;">              html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># allow \u5141\u8BB8</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> allow </span><span style="color:#A6ACCD;">             39.xxx.xxx.xxx</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># deny  \u62D2\u7EDD</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> deny </span><span style="color:#A6ACCD;">             </span><span style="color:#89DDFF;"> all;</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="pc-\u7AEF\u548C\u79FB\u52A8\u7AEF\u4F7F\u7528\u4E0D\u540C\u7684\u9879\u76EE\u6587\u4EF6\u6620\u5C04" tabindex="-1">PC \u7AEF\u548C\u79FB\u52A8\u7AEF\u4F7F\u7528\u4E0D\u540C\u7684\u9879\u76EE\u6587\u4EF6\u6620\u5C04 <a class="header-anchor" href="#pc-\u7AEF\u548C\u79FB\u52A8\u7AEF\u4F7F\u7528\u4E0D\u540C\u7684\u9879\u76EE\u6587\u4EF6\u6620\u5C04" aria-hidden="true">#</a></h2><div class="language-nginx"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">server</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">/ </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> root </span><span style="color:#A6ACCD;">/home/static/pc</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> (</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">http_user_agent </span><span style="color:#89DDFF;">~* </span><span style="color:#C3E88D;">&#39;(mobile|android|iphone|ipad|phone)&#39;</span><span style="color:#A6ACCD;">) </span><span style="color:#F07178;">{</span></span>
<span class="line"><span style="color:#F07178;">     </span><span style="color:#89DDFF;"> root </span><span style="color:#F07178;">/home/static/mobile</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#F07178;">    }</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> index </span><span style="color:#A6ACCD;">index.html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre></div><h2 id="\u4E00\u4E2A-web-\u670D\u52A1\uFF0C\u914D\u7F6E\u591A\u4E2A\u9879\u76EE-location-\u5339\u914D\u8DEF\u7531\u533A\u522B" tabindex="-1">\u4E00\u4E2A web \u670D\u52A1\uFF0C\u914D\u7F6E\u591A\u4E2A\u9879\u76EE (location \u5339\u914D\u8DEF\u7531\u533A\u522B) <a class="header-anchor" href="#\u4E00\u4E2A-web-\u670D\u52A1\uFF0C\u914D\u7F6E\u591A\u4E2A\u9879\u76EE-location-\u5339\u914D\u8DEF\u7531\u533A\u522B" aria-hidden="true">#</a></h2><div class="language-nginx"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">server</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> listen </span><span style="color:#A6ACCD;">               </span><span style="color:#F78C6C;">80</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> server_name </span><span style="color:#A6ACCD;">          _</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># \u4E3B\u5E94\u7528</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">/ </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> root </span><span style="color:#A6ACCD;">               html/main</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> index </span><span style="color:#A6ACCD;">              index.html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> try_files </span><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">uri </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">uri/ /index.html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># \u5B50\u5E94\u7528\u4E00</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">^~</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/store/ </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> proxy_pass </span><span style="color:#A6ACCD;">         http://localhost:8001</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> proxy_redirect </span><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;"> off;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> proxy_set_header </span><span style="color:#A6ACCD;">   Host </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">host</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> proxy_set_header </span><span style="color:#A6ACCD;">   X-Real-IP </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">remote_addr</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> proxy_set_header </span><span style="color:#A6ACCD;">   X-Forwarded-For</span></span>
<span class="line"><span style="color:#A6ACCD;">    proxy_set_header    X-Forwarded-For </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">proxy_add_x_forwarded_for</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># \u5B50\u5E94\u7528\u4E8C</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">^~</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/school/ </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> proxy_pass </span><span style="color:#A6ACCD;">         http://localhost:8002</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> proxy_redirect </span><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;"> off;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> proxy_set_header </span><span style="color:#A6ACCD;">   Host </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">host</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> proxy_set_header </span><span style="color:#A6ACCD;">   X-Real-IP </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">remote_addr</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> proxy_set_header </span><span style="color:#A6ACCD;">   X-Forwarded-For </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">proxy_add_x_forwarded_for</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># \u9759\u6001\u8D44\u6E90\u8BFB\u53D6\u4E0D\u5230\u95EE\u9898\u5904\u7406</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">rewrite</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">^/api/profile/(.*)$</span><span style="color:#A6ACCD;"> /(\u66FF\u6362\u6210\u6B63\u786E\u8DEF\u5F84\u7684\u6587\u4EF6\u7684\u4E0A\u4E00\u5C42\u76EE\u5F55)/</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">1</span><span style="color:#89DDFF;"> last;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># \u5B50\u5E94\u7528\u4E00\u670D\u52A1</span></span>
<span class="line"><span style="color:#C792EA;">server</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> listen </span><span style="color:#A6ACCD;">               </span><span style="color:#F78C6C;">8001</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> server_name </span><span style="color:#A6ACCD;">          _</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">/ </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> root </span><span style="color:#A6ACCD;">               html/store</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> index </span><span style="color:#A6ACCD;">              index.html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> try_files </span><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">uri </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">uri/ /index.html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">^~</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/store/ </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> alias </span><span style="color:#A6ACCD;">              html/store/</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> index </span><span style="color:#A6ACCD;">              index.html index.htm</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> try_files </span><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">uri /store/index.html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># \u63A5\u53E3\u4EE3\u7406</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">/api </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> proxy_pass </span><span style="color:#A6ACCD;">         http://localhost:8089</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># \u5B50\u5E94\u7528\u4E8C\u670D\u52A1</span></span>
<span class="line"><span style="color:#C792EA;">server</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> listen </span><span style="color:#A6ACCD;">               </span><span style="color:#F78C6C;">8002</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> server_name </span><span style="color:#A6ACCD;">          _</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">/ </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> root </span><span style="color:#A6ACCD;">               html/school</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> index </span><span style="color:#A6ACCD;">              index.html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> try_files </span><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">uri </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">uri/ /index.html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">^~</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/school/ </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> alias </span><span style="color:#A6ACCD;">              html/school/</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> index </span><span style="color:#A6ACCD;">              index.html index.htm</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> try_files </span><span style="color:#A6ACCD;">          </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">uri /school/index.html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># \u63A5\u53E3\u4EE3\u7406</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">/api </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> proxy_pass </span><span style="color:#A6ACCD;">         http://localhost:10010</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="\u914D\u7F6E\u8D1F\u8F7D\u5747\u8861" tabindex="-1">\u914D\u7F6E\u8D1F\u8F7D\u5747\u8861 <a class="header-anchor" href="#\u914D\u7F6E\u8D1F\u8F7D\u5747\u8861" aria-hidden="true">#</a></h2><div class="language-nginx"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">upstream</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">my_upstream </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">server</span><span style="color:#A6ACCD;">                http://localhost:9001;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">server</span><span style="color:#A6ACCD;">                http://localhost:9002;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">server</span><span style="color:#A6ACCD;">                http://localhost:9003;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">server</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> listen </span><span style="color:#A6ACCD;">               </span><span style="color:#F78C6C;">9000</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> server_name </span><span style="color:#A6ACCD;">          test.com</span><span style="color:#89DDFF;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">/ </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> proxy_pass </span><span style="color:#A6ACCD;">         my_upstream</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> proxy_set_header </span><span style="color:#A6ACCD;">   Host </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">proxy_host</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> proxy_set_header </span><span style="color:#A6ACCD;">   X-Real-IP </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">remote_addr</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> proxy_set_header </span><span style="color:#A6ACCD;">   X-Forwarded-For </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">proxy_add_x_forwarded_for</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="ssl-\u914D\u7F6E-https" tabindex="-1">SSL \u914D\u7F6E HTTPS <a class="header-anchor" href="#ssl-\u914D\u7F6E-https" aria-hidden="true">#</a></h2><div class="language-nginx"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">server</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> listen </span><span style="color:#A6ACCD;">                     </span><span style="color:#F78C6C;">80</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> server_name </span><span style="color:#A6ACCD;">                www.xxx.com</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># \u5C06 http \u91CD\u5B9A\u5411\u8F6C\u79FB\u5230 https</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">301</span><span style="color:#A6ACCD;"> https://</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">server_name</span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">request_uri;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">server</span><span style="color:#A6ACCD;"> {</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> listen </span><span style="color:#A6ACCD;">                     </span><span style="color:#F78C6C;">443</span><span style="color:#A6ACCD;"> ssl</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> server_name </span><span style="color:#A6ACCD;">                www.xxx.com</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> ssl_certificate </span><span style="color:#A6ACCD;">            /etc/nginx/ssl/www.xxx.com.pem</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> ssl_certificate_key </span><span style="color:#A6ACCD;">        /etc/nginx/ssl/www.xxx.com.key</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> ssl_session_timeout </span><span style="color:#A6ACCD;">        </span><span style="color:#F78C6C;">10m</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> ssl_ciphers </span><span style="color:#A6ACCD;">                ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> ssl_protocols </span><span style="color:#A6ACCD;">              TLSv1 TLSv1.1 TLSv1.2</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> ssl_prefer_server_ciphers </span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;"> on;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">/ </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> root </span><span style="color:#A6ACCD;">                   /project/xxx</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> index </span><span style="color:#A6ACCD;">                  index.html index.htm index.md</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> try_files </span><span style="color:#A6ACCD;">              </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">uri </span><span style="color:#89DDFF;">$</span><span style="color:#A6ACCD;">uri/ /index.html</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span></code></pre></div><h2 id="prod-api-\u4E0E-prod-api-\u7684\u533A\u522B\u8BE6\u89E3" tabindex="-1"><code>/prod-api/</code> \u4E0E <code>/prod-api</code> \u7684\u533A\u522B\u8BE6\u89E3 <a class="header-anchor" href="#prod-api-\u4E0E-prod-api-\u7684\u533A\u522B\u8BE6\u89E3" aria-hidden="true">#</a></h2><p>\u5728 Nginx \u4E2D\uFF0C<code>location</code> \u5757\u7528\u4E8E\u5B9A\u4E49\u8BF7\u6C42\u7684\u8DEF\u7531\u89C4\u5219\uFF0C\u800C <code>proxy_pass</code> \u6307\u4EE4\u7528\u4E8E\u5C06\u8BF7\u6C42\u4EE3\u7406\u5230\u540E\u7AEF\u670D\u52A1\u3002\u4EE5\u4E0B\u4E24\u79CD\u914D\u7F6E\u770B\u4F3C\u76F8\u4F3C\uFF0C\u4F46\u5728\u5B9E\u9645\u4EE3\u7406\u884C\u4E3A\u4E2D\u6709\u7740\u663E\u8457\u5DEE\u5F02\uFF1A</p><h3 id="\u914D\u7F6E\u5BF9\u6BD4" tabindex="-1">\u914D\u7F6E\u5BF9\u6BD4 <a class="header-anchor" href="#\u914D\u7F6E\u5BF9\u6BD4" aria-hidden="true">#</a></h3><ol><li><p><strong>\u914D\u7F6E\u4E00</strong>\uFF08\u672B\u5C3E\u5E26\u659C\u6760 <code>/</code>\uFF09\uFF1A</p><div class="language-nginx"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">/prod-api/ </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> proxy_pass </span><span style="color:#A6ACCD;">http://127.0.0.1:9400/</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> proxy_redirect </span><span style="color:#A6ACCD;">off</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span></code></pre></div></li><li><p><strong>\u914D\u7F6E\u4E8C</strong>\uFF08\u672B\u5C3E\u4E0D\u5E26\u659C\u6760 <code>/</code>\uFF09\uFF1A</p><div class="language-nginx"><span class="copy"></span><pre><code><span class="line"><span style="color:#C792EA;">location</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">/prod-api </span><span style="color:#A6ACCD;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> proxy_pass </span><span style="color:#A6ACCD;">http://127.0.0.1:9400</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;"> proxy_redirect </span><span style="color:#A6ACCD;">off</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">}</span></span>
<span class="line"></span></code></pre></div></li></ol><hr><h3 id="\u6838\u5FC3\u533A\u522B\u5206\u6790" tabindex="-1">\u6838\u5FC3\u533A\u522B\u5206\u6790 <a class="header-anchor" href="#\u6838\u5FC3\u533A\u522B\u5206\u6790" aria-hidden="true">#</a></h3><h4 id="_1-location-\u5339\u914D\u89C4\u5219" tabindex="-1">1. <code>location</code> \u5339\u914D\u89C4\u5219 <a class="header-anchor" href="#_1-location-\u5339\u914D\u89C4\u5219" aria-hidden="true">#</a></h4><ul><li><p><strong><code>/prod-api/</code></strong><br> \u4EC5\u5339\u914D\u4EE5 <code>/prod-api/</code> <strong>\u5F00\u5934\u4E14\u5305\u542B\u540E\u7EED\u8DEF\u5F84</strong>\u7684\u8BF7\u6C42\u3002\u4F8B\u5982\uFF1A</p><ul><li><code>/prod-api/user</code> \u2192 \u5339\u914D\u6210\u529F\u3002</li><li><code>/prod-api</code> \u2192 \u5339\u914D\u5931\u8D25\uFF08\u7F3A\u5C11\u672B\u5C3E\u7684 <code>/</code>\uFF09\u3002</li><li><code>/prod-api-test</code> \u2192 \u5339\u914D\u5931\u8D25\uFF08\u975E\u7CBE\u786E\u524D\u7F00\uFF09\u3002</li></ul></li><li><p><strong><code>/prod-api</code></strong><br> \u5339\u914D\u4EE5 <code>/prod-api</code> <strong>\u5F00\u5934\u7684\u4EFB\u4F55\u8BF7\u6C42</strong>\uFF0C\u5305\u62EC\uFF1A</p><ul><li><code>/prod-api/user</code> \u2192 \u5339\u914D\u6210\u529F\u3002</li><li><code>/prod-api</code> \u2192 \u5339\u914D\u6210\u529F\u3002</li><li><code>/prod-api-test</code> \u2192 \u5339\u914D\u6210\u529F\uFF08\u56E0\u4E3A\u524D\u7F00\u76F8\u540C\uFF09\u3002</li></ul></li></ul><hr><h4 id="_2-proxy-pass-\u8DEF\u5F84\u66FF\u6362\u884C\u4E3A" tabindex="-1">2. <code>proxy_pass</code> \u8DEF\u5F84\u66FF\u6362\u884C\u4E3A <a class="header-anchor" href="#_2-proxy-pass-\u8DEF\u5F84\u66FF\u6362\u884C\u4E3A" aria-hidden="true">#</a></h4><ul><li><p><strong>\u914D\u7F6E\u4E00\uFF08\u5E26\u659C\u6760\uFF09</strong><br><code>proxy_pass</code> \u672B\u5C3E\u7684 <code>/</code> \u8868\u793A\u5C06 <strong>\u79FB\u9664 <code>location</code> \u5339\u914D\u7684\u8DEF\u5F84\u90E8\u5206</strong>\uFF0C\u518D\u5C06\u5269\u4F59\u8DEF\u5F84\u62FC\u63A5\u5230\u4EE3\u7406\u5730\u5740\u3002<br><strong>\u793A\u4F8B</strong>\uFF1A</p><ul><li>\u8BF7\u6C42\u8DEF\u5F84\uFF1A<code>/prod-api/user/login</code></li><li>\u4EE3\u7406\u540E\u7684\u8DEF\u5F84\uFF1A<code>http://127.0.0.1:9400/user/login</code></li></ul></li><li><p><strong>\u914D\u7F6E\u4E8C\uFF08\u4E0D\u5E26\u659C\u6760\uFF09</strong><br><code>proxy_pass</code> \u672B\u5C3E\u6CA1\u6709 <code>/</code>\uFF0C\u8868\u793A\u5C06 <strong>\u4FDD\u7559 <code>location</code> \u5339\u914D\u7684\u8DEF\u5F84\u90E8\u5206</strong>\uFF0C\u76F4\u63A5\u62FC\u63A5\u5230\u4EE3\u7406\u5730\u5740\u3002<br><strong>\u793A\u4F8B</strong>\uFF1A</p><ul><li>\u8BF7\u6C42\u8DEF\u5F84\uFF1A<code>/prod-api/user/login</code></li><li>\u4EE3\u7406\u540E\u7684\u8DEF\u5F84\uFF1A<code>http://127.0.0.1:9400/prod-api/user/login</code></li></ul></li></ul><hr><h3 id="\u5BF9\u6BD4\u8868\u683C" tabindex="-1">\u5BF9\u6BD4\u8868\u683C <a class="header-anchor" href="#\u5BF9\u6BD4\u8868\u683C" aria-hidden="true">#</a></h3><table><thead><tr><th>\u884C\u4E3A</th><th>\u914D\u7F6E\u4E00\uFF08<code>/prod-api/</code>\uFF09</th><th>\u914D\u7F6E\u4E8C\uFF08<code>/prod-api</code>\uFF09</th></tr></thead><tbody><tr><td>\u5339\u914D\u8DEF\u5F84</td><td>\u4E25\u683C\u5339\u914D <code>/prod-api/</code> \u5F00\u5934\u7684\u8BF7\u6C42</td><td>\u5339\u914D\u6240\u6709\u4EE5 <code>/prod-api</code> \u5F00\u5934\u7684\u8BF7\u6C42</td></tr><tr><td>\u4EE3\u7406\u8DEF\u5F84\u5904\u7406</td><td>\u79FB\u9664 <code>/prod-api/</code> \u524D\u7F00</td><td>\u4FDD\u7559 <code>/prod-api</code> \u524D\u7F00</td></tr><tr><td>\u8BF7\u6C42 <code>/prod-api</code></td><td>\u4E0D\u5339\u914D</td><td>\u4EE3\u7406\u5230 <code>http://127.0.0.1:9400/prod-api</code></td></tr><tr><td>\u8BF7\u6C42 <code>/prod-api/</code></td><td>\u4EE3\u7406\u5230 <code>http://127.0.0.1:9400/</code></td><td>\u4EE3\u7406\u5230 <code>http://127.0.0.1:9400/prod-api/</code></td></tr><tr><td>\u8BF7\u6C42 <code>/prod-api/user</code></td><td>\u4EE3\u7406\u5230 <code>http://127.0.0.1:9400/user</code></td><td>\u4EE3\u7406\u5230 <code>http://127.0.0.1:9400/prod-api/user</code></td></tr></tbody></table><hr><h3 id="\u9002\u7528\u573A\u666F" tabindex="-1">\u9002\u7528\u573A\u666F <a class="header-anchor" href="#\u9002\u7528\u573A\u666F" aria-hidden="true">#</a></h3><ol><li><p><strong>\u914D\u7F6E\u4E00\uFF08<code>/prod-api/</code>\uFF09</strong></p><ul><li>\u540E\u7AEF\u670D\u52A1\u4E0D\u9700\u8981 <code>prod-api</code> \u524D\u7F00\uFF08\u5982\u5FAE\u670D\u52A1\u7F51\u5173\u6216\u7EDF\u4E00 API \u5165\u53E3\uFF09\u3002</li><li>\u9700\u8981\u9690\u85CF\u8DEF\u5F84\u524D\u7F00\uFF0C\u5B9E\u73B0\u8DEF\u5F84\u201C\u6E05\u6D17\u201D\u3002</li><li>\u793A\u4F8B\uFF1A\u5C06\u524D\u7AEF\u8BF7\u6C42\u7684 <code>/prod-api/user</code> \u4EE3\u7406\u5230\u540E\u7AEF\u7684 <code>/user</code>\u3002</li></ul></li><li><p><strong>\u914D\u7F6E\u4E8C\uFF08<code>/prod-api</code>\uFF09</strong></p><ul><li>\u540E\u7AEF\u670D\u52A1\u9700\u8981\u4FDD\u7559 <code>prod-api</code> \u524D\u7F00\uFF08\u5982\u672A\u505A\u8DEF\u5F84\u9694\u79BB\u7684\u65E7\u670D\u52A1\uFF09\u3002</li><li>\u9700\u8981\u7CBE\u786E\u4F20\u9012\u5B8C\u6574\u8DEF\u5F84\u7684\u573A\u666F\u3002</li><li>\u793A\u4F8B\uFF1A\u4EE3\u7406\u5230\u53E6\u4E00\u4E2A\u670D\u52A1\uFF0C\u4E14\u8BE5\u670D\u52A1\u901A\u8FC7 <code>/prod-api</code> \u533A\u5206\u63A5\u53E3\u7248\u672C\u3002</li></ul></li></ol><hr><h3 id="\u5E38\u89C1\u95EE\u9898" tabindex="-1">\u5E38\u89C1\u95EE\u9898 <a class="header-anchor" href="#\u5E38\u89C1\u95EE\u9898" aria-hidden="true">#</a></h3><h4 id="_1-404-\u9519\u8BEF" tabindex="-1">1. 404 \u9519\u8BEF <a class="header-anchor" href="#_1-404-\u9519\u8BEF" aria-hidden="true">#</a></h4><ul><li><strong>\u539F\u56E0</strong>\uFF1A\u914D\u7F6E\u4E00\u672A\u6B63\u786E\u5339\u914D <code>/prod-api</code>\uFF08\u4E0D\u5E26\u659C\u6760\uFF09\u7684\u8BF7\u6C42\uFF0C\u5BFC\u81F4\u76F4\u63A5\u8BBF\u95EE <code>/prod-api</code> \u65F6\u8FD4\u56DE 404\u3002</li><li><strong>\u89E3\u51B3</strong>\uFF1A\u6DFB\u52A0 <code>location = /prod-api { ... }</code> \u5904\u7406\u6839\u8DEF\u5F84\u3002</li></ul><h4 id="_2-\u8DEF\u5F84\u5197\u4F59" tabindex="-1">2. \u8DEF\u5F84\u5197\u4F59 <a class="header-anchor" href="#_2-\u8DEF\u5F84\u5197\u4F59" aria-hidden="true">#</a></h4><ul><li><strong>\u73B0\u8C61</strong>\uFF1A\u914D\u7F6E\u4E8C\u5BFC\u81F4\u540E\u7AEF\u6536\u5230\u5E26\u6709 <code>/prod-api</code> \u524D\u7F00\u7684\u8BF7\u6C42\uFF0C\u4F46\u540E\u7AEF\u672A\u914D\u7F6E\u8BE5\u8DEF\u5F84\u3002</li><li><strong>\u89E3\u51B3</strong>\uFF1A\u6539\u7528\u914D\u7F6E\u4E00\u6216\u5728\u540E\u7AEF\u670D\u52A1\u4E2D\u6DFB\u52A0\u524D\u7F00\u5904\u7406\u903B\u8F91\u3002</li></ul><hr><h3 id="\u603B\u7ED3" tabindex="-1">\u603B\u7ED3 <a class="header-anchor" href="#\u603B\u7ED3" aria-hidden="true">#</a></h3><ul><li><strong><code>proxy_pass</code> \u672B\u5C3E\u7684\u659C\u6760</strong>\u51B3\u5B9A\u4E86\u662F\u5426\u4FDD\u7559 <code>location</code> \u5339\u914D\u7684\u8DEF\u5F84\u3002</li><li><strong><code>location</code> \u7684\u7CBE\u786E\u6027</strong>\u5F71\u54CD\u8BF7\u6C42\u7684\u5339\u914D\u8303\u56F4\u3002</li><li>\u6839\u636E\u540E\u7AEF\u670D\u52A1\u7684\u8DEF\u5F84\u9700\u6C42\u9009\u62E9\u914D\u7F6E\uFF0C\u907F\u514D\u8DEF\u5F84\u4E0D\u5339\u914D\u5BFC\u81F4\u7684\u5F02\u5E38\u3002</li></ul>`,71),e=[o];function c(t,r,D,C,i,y){return a(),n("div",null,e)}var F=s(p,[["render",c]]);export{d as __pageData,F as default};
